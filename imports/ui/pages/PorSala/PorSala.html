<template name="PorSala">

  <div class="print-only"><h4>{{salaActiva}}</h4><br></div>

  <div class="row no-print">
    <div class="col-sm-6">
      <select name="sala" class="js-salaSelect form-control">
        {{#each sala in salas}}
          <option selected={{isSelected sala}}>{{sala}}</option>
        {{/each}}
      </select>
    </div>
    <div class="col-sm-6">
      <input type="text" class="form-control" value="{{fecha}}" id="fecha">
    </div>
  </div>

  {{#if ready}}
    <!-- Avanzar o retroceder la fecha -->
    <ul class="pager no-print">
      <li class="previous"><a class="js-semanaAnt">Anterior</a></li>
      <li class="next"><a class="js-semanaSig">Siguiente</a></li>
    </ul>

    <div class="tabla">
      <div class="fila">
        <div class="cabeza">Módulos</div>
        {{#each diasSemana}}
          <div class="cabeza">{{this}}</div>
        {{/each}}
      </div>

      {{#each fila in tablaReservas}}
        <div class="fila">
          <div class="cabeza">{{modulo @index}}</div>
          {{#each celda in fila}}
            <div class="cell">
              <div class="contenedor {{masDeUna celda}}">
                {{#each celda}}
                  <div class="reserva {{accion}}" style="{{color}}">
                    {{actividad}}
                    {{#if repite}}
                      <div class="pin"><span class="glyphicon glyphicon-pushpin"></span></div>
                    {{/if}}
                  </div>
                {{/each}}
              </div>
            </div>
          {{/each}}
        </div>
      {{/each}}

    </div>

  {{#if isInRole 'admin'}}
    <div class="cuadroSuperpuestas">
      <p><strong>Reservas superpuestas: </strong> <button class="btn btn-default btn-xs js-actualizaSuperpuestas">Actualizar</button></p>
      {{#each superpuestas}}
        <a class="js-verReserva">{{sala}} / {{fechas}} / Módulo {{modulos}}</a><br>
      {{else}}
        <p>No hay ninguna superposición de reservas</p>
      {{/each}}
    </div>
  {{/if}}

  {{else}}<h4>...</h4>{{/if}}

</template>
