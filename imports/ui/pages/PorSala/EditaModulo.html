<template name="EditaModulo">

  <div class="modal">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-body">

          <h5>{{sala}}</h5>
          <h5>{{fecha}} | MÃ³dulo {{modulo}}</h5>
          <hr>

          {{#with reserva}}
            <form id="reservaForm">
              <!-- Es reserva fija o no -->
              {{#if _id}}
                {{#if esFija}}
                  <span class="red pull-right"><span class="glyphicon glyphicon-pushpin"></span> Reserva fija</span>
                {{/if}}
              {{else}}
                <div class="checkbox">
                  <label><input type="checkbox" name="esFija">Reserva fija</label>
                </div>
              {{/if}}

              <!-- Actividad -->
              <div class="form-group">
                <label>Actividad:</label>
                <input name="actividad" type="text" class="form-control" value="{{actividad}}">
              </div>

              <!-- Integrantes -->
              <div class="form-group">
                <label>Integrantes:</label>
                <select multiple class="form-control" name="integrantes" id="integrantes">
                  {{#each usuario in usuarios}}
                    <option selected="{{esIntegrante usuario}}">{{usuario}}</option>
                  {{/each}}
                </select>
              </div>

              <!-- Botones -->
              {{#if _id}}
                {{#if esFija}}
                  <div class="btn-group-vertical">
                    <button type="submit" class="btn btn-primary btn-sm">Modificar</button>
                    <button type="button" class="btn btn-default btn-sm" data-dismiss="modal">Cancelar</button>
                  </div>
                  <div class="btn-group-vertical pull-right">
                    <button type="button" class="js-eliminaEstaFecha btn btn-warning btn-sm">Eliminar esta</button>
                    <button type="button" class="js-eliminar btn btn-danger btn-sm">Eliminar todas</button>
                  </div>
                {{else}}
                  <button type="submit" class="btn btn-primary btn-sm">Modificar</button>
                  <button type="button" class="btn btn-default btn-sm" data-dismiss="modal">Cancelar</button>
                  <button type="button" class="js-eliminar btn btn-danger btn-sm pull-right">Eliminar</button>
                {{/if}}
              {{else}}
                <button type="submit" class="btn btn-primary btn-sm">Reservar</button>
                <button type="button" class="btn btn-default btn-sm" data-dismiss="modal">Cancelar</button>
              {{/if}}

            </form>
          {{/with}}

          {{#with reservaSP}}
            {{#if _id}}
              <hr>
              <button type="button" class="js-eliminar btn btn-danger btn-sm pull-right">Eliminar</button>
              <div class="greyed">
                <label>Reserva Sin Prioridad</label>
                <p>Actividad: {{actividad}}</p>
                <p>Integrantes: {{separaConComa integrantes}}</p>
              </div>

            {{/if}}
          {{/with}}
        </div>
      </div>
    </div>
  </div>

</template>
